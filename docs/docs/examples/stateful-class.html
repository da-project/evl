<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">


<link rel="shortcut icon" href="../../favicons/favicon.ico" >
<link rel="apple-touch-icon" href="../../favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="../../favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="../../favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="../../favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="../../favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="../../favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="../../favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="../../favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="../../favicons/android-192x192.png" sizes="192x192">

<title>Stateful class | EVL</title>
<meta name="description" content="Add a state to your class">
<meta property="og:url" content="/docs/examples/stateful-class.html">
  <meta property="og:site_name" content="EVL">
  <meta property="og:title" content="Stateful class">
  <meta property="og:description" content="Add a state to your class">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="docs">
    <meta property="article:modified_time" content="2022-11-15T11:44:04+01:00">

  <meta itemprop="name" content="Stateful class">
  <meta itemprop="description" content="Add a state to your class">
  <meta itemprop="dateModified" content="2022-11-15T11:44:04+01:00">
  <meta itemprop="wordCount" content="664">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Stateful class">
  <meta name="twitter:description" content="Add a state to your class">
<link rel="preload" href="../../scss/main.min.0a33e194185ad3c8123647a2a716d767eff3e2638e9ca48ab7a00975a7c70945.css" as="style" integrity="sha256-CjPhlBha08gSNkeipxbXZ&#43;/z4mOOnKSKt6AJdafHCUU=" crossorigin="anonymous">
<link href="../../scss/main.min.0a33e194185ad3c8123647a2a716d767eff3e2638e9ca48ab7a00975a7c70945.css" rel="stylesheet" integrity="sha256-CjPhlBha08gSNkeipxbXZ&#43;/z4mOOnKSKt6AJdafHCUU=" crossorigin="anonymous">
<script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
  crossorigin="anonymous"></script>
<style>

	a {
		color: #b91515;
	}
	
	.btn-get-started {
		background: #5c5e5a;
		color: white;
	}
	
	.btn-use-it {
		background: #800000;
		color: white;
	}

</style>

  </head>
  <body class="td-page">
    <header>
      <nav class="td-navbar js-navbar-scroll" data-bs-theme="dark">
<div class="container-fluid flex-column flex-md-row">
  <a class="navbar-brand" href="../../"><span class="navbar-brand__logo navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25"><path d="M0 0C8.25.0 16.5.0 25 0c0 8.25.0 16.5.0 25-8.25.0-16.5.0-25 0C0 16.75.0 8.5.0.0z" fill="#b1b1b1" transform="translate(0,0)"/><path d="M0 0C8.25.0 16.5.0 25 0c0 8.25.0 16.5.0 25-8.25.0-16.5.0-25 0C0 16.75.0 8.5.0.0zM3 3C3 9.6 3 16.2 3 23c6.6.0 13.2.0 20 0 0-6.6.0-13.2.0-20C16.4 3 9.8 3 3 3z" fill="#b73131" transform="translate(0,0)"/><path d="M0 0C3.3.0 6.6.0 10 0c0 .66.0 1.32.0 2C8.02 2 6.04 2 4 2 4 3.32 4 4.64 4 6c1.98.0 3.96.0 6 0 0 .66.0 1.32.0 2C8.02 8 6.04 8 4 8c0 1.32.0 2.64.0 4 1.98.0 3.96.0 6 0 0 .66.0 1.32.0 2-3.3.0-6.6.0-10 0C0 9.38.0 4.76.0.0z" fill="#860f0d" transform="translate(7,5)"/></svg></span><span class="navbar-brand__name">EVL</span></a>
  <div class="td-navbar-nav-scroll ms-md-auto" id="main_navbar">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="../../docs/about.html"><span>What is EVL?</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../../docs.html"><span>Documentation</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="../../apidocs/index.html"><span>Javadoc</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="https://github.com/ylegoc/evl" target="_blank" rel="noopener"><span>GitHub</span></a>
      </li>
      </ul>
  </div>
  <div class="d-none d-lg-block">
    
  </div>
</div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            <div id="td-sidebar-menu" class="td-sidebar__inner">
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type="button" data-bs-toggle="collapse" data-bs-target="#td-section-nav" aria-controls="td-section-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  <nav class="td-sidebar-nav collapse" id="td-section-nav">
    <ul class="td-sidebar-nav__section pe-md-3 ul-0">
      <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docshtml-li">
  <a href="../../docs.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-docshtml"><span class="">Documentation</span></a>
  <ul class="ul-1">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsabouthtml-li">
  <a href="../../docs/about.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsabouthtml"><span class="">What is EVL?</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsusehtml-li">
  <a href="../../docs/use.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsusehtml"><span class="">How to use EVL</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsthe-multimethodshtml-li">
  <a href="../../docs/the-multimethods.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsthe-multimethodshtml"><span class="">The multimethods</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodsbase-transformhtml-li">
  <a href="../../docs/the-multimethods/base-transform.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodsbase-transformhtml"><span class="">The base transform</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodsdimension-twohtml-li">
  <a href="../../docs/the-multimethods/dimension-two.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodsdimension-twohtml"><span class="">In two dimensions</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodsbest-matchhtml-li">
  <a href="../../docs/the-multimethods/best-match.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodsbest-matchhtml"><span class="">Best match</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodschange-comparatorhtml-li">
  <a href="../../docs/the-multimethods/change-comparator.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodschange-comparatorhtml"><span class="">Change comparator</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodsambiguity-resolutionhtml-li">
  <a href="../../docs/the-multimethods/ambiguity-resolution.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodsambiguity-resolutionhtml"><span class="">Ambiguity resolution</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsthe-multimethodsmore-dimensionshtml-li">
  <a href="../../docs/the-multimethods/more-dimensions.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsthe-multimethodsmore-dimensionshtml"><span class="">More dimensions</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docstheoryhtml-li">
  <a href="../../docs/theory.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docstheoryhtml"><span class="">Theory</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheorytuple-distancehtml-li">
  <a href="../../docs/theory/tuple-distance.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheorytuple-distancehtml"><span class="">Tuple of types distance</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheorydistance-comparatorshtml-li">
  <a href="../../docs/theory/distance-comparators.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheorydistance-comparatorshtml"><span class="">Distance comparators</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheorymultimethod-definitionhtml-li">
  <a href="../../docs/theory/multimethod-definition.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheorymultimethod-definitionhtml"><span class="">Multimethod definition</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheorysearch-best-matchhtml-li">
  <a href="../../docs/theory/search-best-match.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheorysearch-best-matchhtml"><span class="">Search for the best match</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheoryinvokehtml-li">
  <a href="../../docs/theory/invoke.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheoryinvokehtml"><span class="">Invoke with cache</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docstheoryasymmetric-vs-symmetrichtml-li">
  <a href="../../docs/theory/asymmetric-vs-symmetric.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docstheoryasymmetric-vs-symmetrichtml"><span class="">Asymmetric vs symmetric</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id="m-docsmore-featureshtml-li">
  <a href="../../docs/more-features.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsmore-featureshtml"><span class="">More features</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuressuper-commandshtml-li">
  <a href="../../docs/more-features/super-commands.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuressuper-commandshtml"><span class="">Super commands</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuresinterfaceshtml-li">
  <a href="../../docs/more-features/interfaces.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuresinterfaceshtml"><span class="">Interfaces</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuresreturn-type-parametershtml-li">
  <a href="../../docs/more-features/return-type-parameters.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuresreturn-type-parametershtml"><span class="">Return type and parameters</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuresswitchhtml-li">
  <a href="../../docs/more-features/switch.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuresswitchhtml"><span class="">Switch</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuresopen-accesshtml-li">
  <a href="../../docs/more-features/open-access.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuresopen-accesshtml"><span class="">Open access</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featuresprotected-accesshtml-li">
  <a href="../../docs/more-features/protected-access.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featuresprotected-accesshtml"><span class="">Protected access</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featurescontrolled-extensionhtml-li">
  <a href="../../docs/more-features/controlled-extension.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featurescontrolled-extensionhtml"><span class="">Controlled extension</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id="m-docsmore-featureserrorshtml-li">
  <a href="../../docs/more-features/errors.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsmore-featureserrorshtml"><span class="">Errors</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-docsexampleshtml-li">
  <a href="../../docs/examples.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docsexampleshtml"><span class="">Examples</span></a>
  <ul class="ul-2 foldable">
    <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplespreliminarieshtml-li">
  <a href="../../docs/examples/preliminaries.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplespreliminarieshtml"><span class="">Preliminaries</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesvisitorhtml-li">
  <a href="../../docs/examples/visitor.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesvisitorhtml"><span class="">Visitor</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-docsexamplesstateful-classhtml-li">
  <a href="../../docs/examples/stateful-class.html" class="align-left ps-0 active td-sidebar-link td-sidebar-link__page" id="m-docsexamplesstateful-classhtml"><span class="td-sidebar-nav-active-item">Stateful class</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplescompositionhtml-li">
  <a href="../../docs/examples/composition.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplescompositionhtml"><span class="">Composition</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesstatehtml-li">
  <a href="../../docs/examples/state.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesstatehtml"><span class="">State</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplescomparatorhtml-li">
  <a href="../../docs/examples/comparator.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplescomparatorhtml"><span class="">Comparator</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesstrategyhtml-li">
  <a href="../../docs/examples/strategy.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesstrategyhtml"><span class="">Strategy</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesfactoryhtml-li">
  <a href="../../docs/examples/factory.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesfactoryhtml"><span class="">Factory</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesobserverhtml-li">
  <a href="../../docs/examples/observer.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesobserverhtml"><span class="">Observer</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplesqueuehtml-li">
  <a href="../../docs/examples/queue.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplesqueuehtml"><span class="">Queue</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplestostringhtml-li">
  <a href="../../docs/examples/tostring.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplestostringhtml"><span class="">ToString</span></a>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docsexamplestreewalkerhtml-li">
  <a href="../../docs/examples/treewalker.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id="m-docsexamplestreewalkerhtml"><span class="">Tree walker</span></a>
</li>
  </ul>
</li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-docswhyhtml-li">
  <a href="../../docs/why.html" class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id="m-docswhyhtml"><span class="">Why use EVL?</span></a>
</li>
  </ul>
</li>
    </ul>
  </nav>
</div>

          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            <div class="td-page-meta ms-2 pb-1 pt-2 mb-0">

</div>

            <div class="td-toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#base-implementation">Base implementation</a></li>
        <li><a href="#extension">Extension</a></li>
      </ul>
    </li>
  </ul>
</nav>
      </div>
    
            

          </aside>
          <main class="col-12 col-md-9 col-xl-8 ps-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="td-breadcrumbs">
  <ol class="breadcrumb">
  <li class="breadcrumb-item">
    <a href="../../docs.html">Documentation</a></li>
  <li class="breadcrumb-item">
    <a href="../../docs/examples.html">Examples</a></li>
  <li class="breadcrumb-item active" aria-current="page">
    Stateful class</li>
  </ol>
</nav>
            
<div class="td-content">
	<h1>Stateful class</h1>
	<div class="lead">Add a state to your class</div>
	<header class="article-meta">
		
</header>
	<p>The EVL library is very flexible and offers many ways to use the multimethods.
Here we show how to define a stateful class with protected access to a multimethod.</p>
<p>This is a concrete example on how to use a multimethod for managing an inner state. It is based on <a href="../../docs/more-features/protected-access.html">protected access</a>.</p>
<p>The idea here is to define a person finder that will return a location based on different criteria: weather, person, hour.
The classes used in the example are defined in the <a href="../../docs/examples/preliminaries.html">preliminaries</a>.</p>
<h3 id="base-implementation">Base implementation</h3>
<p>Here is the implementation of the <em>PersonFinder</em> class:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a">public</span><span style="color:#bbb"> </span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">PersonFinder</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Method2&lt;Location&gt;<span style="color:#bbb"> </span>m<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Method2&lt;Location&gt;();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Weather<span style="color:#bbb"> </span>weather<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Sunny();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">public</span><span style="color:#bbb"> </span><span style="color:#0a0">PersonFinder</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>m.<span style="color:#1e90ff">add</span>(<span style="color:#00a">this</span>,<span style="color:#bbb"> </span><span style="color:#a50">&#34;findMatch&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">public</span><span style="color:#bbb"> </span><span style="color:#0aa">void</span><span style="color:#bbb"> </span><span style="color:#0a0">setSunnyWeather</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>weather<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Sunny();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">public</span><span style="color:#bbb"> </span><span style="color:#0aa">void</span><span style="color:#bbb"> </span><span style="color:#0a0">setRainyWeather</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>weather<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Rainy();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">findMatch</span>(Rainy<span style="color:#bbb"> </span>weather,<span style="color:#bbb"> </span>Kid<span style="color:#bbb"> </span>kid,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Inside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">findMatch</span>(Sunny<span style="color:#bbb"> </span>weather,<span style="color:#bbb"> </span>Kid<span style="color:#bbb"> </span>kid,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">if</span><span style="color:#bbb"> </span>(hour<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>14<span style="color:#bbb"> </span>&amp;&amp;<span style="color:#bbb"> </span>hour<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>16)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Outside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Inside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">findMatch</span>(Rainy<span style="color:#bbb"> </span>weather,<span style="color:#bbb"> </span>Teen<span style="color:#bbb"> </span>teen,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">if</span><span style="color:#bbb"> </span>(hour<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>8<span style="color:#bbb"> </span>&amp;&amp;<span style="color:#bbb"> </span>hour<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>17)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Outside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Inside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">findMatch</span>(Sunny<span style="color:#bbb"> </span>weather,<span style="color:#bbb"> </span>Teen<span style="color:#bbb"> </span>teen,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">if</span><span style="color:#bbb"> </span>(hour<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>8<span style="color:#bbb"> </span>&amp;&amp;<span style="color:#bbb"> </span>hour<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>19)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Outside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Inside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">public</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">find</span>(Person<span style="color:#bbb"> </span>person,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">try</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span>m.<span style="color:#1e90ff">invoke</span>(weather,<span style="color:#bbb"> </span>person,<span style="color:#bbb"> </span>hour);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">catch</span><span style="color:#bbb"> </span>(Throwable<span style="color:#bbb"> </span>e)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Somewhere();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>The class has two members:</p>
<ul>
<li>The multimethod <em>m</em> of dimension two.</li>
<li>The inner <em>weather</em> state.</li>
</ul>
<p>The <em>weather</em> state can be changed publicly with the two methods <em>setSunnyWeather()</em> and <em>setRainyWeather()</em>.
The multimethod <em>m</em> is configured in the constructor by registering the match methods that are all the methods with the name &ldquo;findMatch&rdquo;.
Then the <em>findMatch()</em> methods are defined and based on two virtual parameters - <em>weather</em> and <em>kid</em> or <em>teen</em>. They implement the find location rules.
To finish the public <em>find()</em> method is exposed which forwards the call to <em>m</em>.</p>
<p>In action:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PersonFinder<span style="color:#bbb"> </span>finder<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>PersonFinder();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Kid(6),<span style="color:#bbb"> </span>10));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Teen(Sex.<span style="color:#1e90ff">GIRL</span>),<span style="color:#bbb"> </span>10));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>finder.<span style="color:#1e90ff">setRainyWeather</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Kid(6),<span style="color:#bbb"> </span>18));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Teen(Sex.<span style="color:#1e90ff">GIRL</span>),<span style="color:#bbb"> </span>18));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Adult(),<span style="color:#bbb"> </span>18));<span style="color:#bbb">
</span></span></span></code></pre></div><p>How would you have implemented such rules without multimethods? Probably by defining the weather state with an integral type (boolean, enum, integer) and using some <em>if</em> or <em>switch</em> statements.
Maybe you would have kept a class definition and use the <em>instanceof</em> operator.</p>
<p>What is sure is that there is no way to properly define some rules based on two class dimensions with standard &ldquo;virtual&rdquo; methods.</p>
<h3 id="extension">Extension</h3>
<p>What is interesting with multimethods is that they are very easily extended.</p>
<p>We want to extend the <em>PersonFinder</em> class by adding some rules concerning the <em>Adult</em> person. For that we simply define a new class that extends <em>PersonFinder</em>:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#00a">public</span><span style="color:#bbb"> </span><span style="color:#00a">class</span> <span style="color:#0a0;text-decoration:underline">AdultPersonFinder</span><span style="color:#bbb"> </span><span style="color:#00a">extends</span><span style="color:#bbb"> </span>PersonFinder<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span><span style="color:#00a">protected</span><span style="color:#bbb"> </span>Location<span style="color:#bbb"> </span><span style="color:#0a0">findMatch</span>(Weather<span style="color:#bbb"> </span>weather,<span style="color:#bbb"> </span>Adult<span style="color:#bbb"> </span>adult,<span style="color:#bbb"> </span><span style="color:#0aa">int</span><span style="color:#bbb"> </span>hour)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">if</span><span style="color:#bbb"> </span>(hour<span style="color:#bbb"> </span>&gt;<span style="color:#bbb"> </span>8<span style="color:#bbb"> </span>&amp;&amp;<span style="color:#bbb"> </span>hour<span style="color:#bbb"> </span>&lt;<span style="color:#bbb"> </span>20)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Outside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">		</span><span style="color:#00a">return</span><span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>Inside();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">	</span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></div><p>The only thing we have to do is define a new <em>findMatch()</em> method with the desired virtual parameter couples, i.e. <em>Weather</em> and <em>Adult</em> in our case.
The match method is automatically registered.</p>
<p>In action:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>PersonFinder<span style="color:#bbb"> </span>finder<span style="color:#bbb"> </span>=<span style="color:#bbb"> </span><span style="color:#00a">new</span><span style="color:#bbb"> </span>AdultPersonFinder();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">			
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>System.<span style="color:#1e90ff">out</span>.<span style="color:#1e90ff">println</span>(<span style="color:#a50">&#34;Person is &#34;</span><span style="color:#bbb"> </span>+<span style="color:#bbb"> </span>finder.<span style="color:#1e90ff">find</span>(<span style="color:#00a">new</span><span style="color:#bbb"> </span>Adult(),<span style="color:#bbb"> </span>21));<span style="color:#bbb">
</span></span></span></code></pre></div><p>How would you have implemented the extension with an <em>if</em> or <em>switch</em> statements? Multimethods show that the extension is natural.</p>
<p>To conclude, this example is showing how to define rules based on three parameters:</p>
<ul>
<li>One <strong>virtual</strong> state of the class</li>
<li>One <strong>virtual</strong> parameter outside the class</li>
<li>One <strong>non-virtual</strong> parameter</li>
</ul>
<p>It is easy to imagine that a general stateful class would use <em>M</em> virtual states, <em>N</em> virtual parameters outside, <em>P</em> non-virtual parameters.
Of course, increase the number of virtual parameters can lead to some rules difficult to understand but the multimethods support it.
It is up to you to find good designs.</p>

	
</div>


          </main>
        </div>
      </div>
      <footer class="td-footer row d-print-none">
  <div class="container-fluid">
    <div class="row mx-md-2">
      <div class="td-footer__left col-6 col-sm-4 order-sm-1">
        
      </div><div class="td-footer__right col-6 col-sm-4 order-sm-3">
        <ul class="td-footer__links-list">
  
  <li class="td-footer__links-item" data-bs-toggle="tooltip" title="GitHub" aria-label="GitHub">
    <a target="_blank" rel="noopener" href="https://github.com/ylegoc/evl" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

      </div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2">
        <span class="td-footer__copyright">&copy;
    2024
    <span class="td-footer__authors">The EVL Authors</span></span><span class="td-footer__all_rights_reserved">All Rights Reserved</span>
      </div>
    </div>
  </div>
</footer>

    </div>
    <script src="../../js/main.min.1b64887c572e23a206e20c997f04baa7fda8d02b725cfd4a4f71f036f2391251.js" integrity="sha256-G2SIfFcuI6IG4gyZfwS6p/2o0CtyXP1KT3HwNvI5ElE=" crossorigin="anonymous"></script>
<script defer src="../../js/click-to-copy.min.73478a7d4807698aed7e355eb23f9890ca18fea3158604c8471746d046702bad.js" integrity="sha256-c0eKfUgHaYrtfjVesj&#43;YkMoY/qMVhgTIRxdG0EZwK60=" crossorigin="anonymous"></script>
<script src='../../js/tabpane-persist.js'></script>

  </body>
</html>